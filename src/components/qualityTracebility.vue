<template>
  <div class="body-bottom">
    <div class="box-block">
      <div class="box-with-popup" style="top: 4%; left: 7%">
        <div class="box button-hor">高架库出库</div>
        <div class="popup">
          <svg version="1.1" width="100%" height="100%">
            <circle
              cx="5"
              cy="75"
              r="2"
              fill="#D8AA2D"
              stroke="#D8AA2D"
              stroke-width="2"
            ></circle>
            <line x1="5" y1="75" x2="50" y2="30" stroke="#D8AA2D" />
            <line x1="50" y1="30" x2="80" y2="30" stroke="#D8AA2D" />
          </svg>
          <div class="popup-label">
            <div>委托方:福建中烟工业有限责任公司</div>
            <div>牌号:福建三明尤溪ELC1CB1A-2023片烟</div>
            <div>班组:丙班</div>
            <div>班次:白班</div>
            <div>开始时间:2023-10-25 09:33:30</div>
            <div>结束时间:2023-10-25 10:33:30</div>
            <div>得分:98.12</div>
          </div>
        </div>
      </div>
      <div class="box-with-popup" style="top: 4%; left: 44%">
        <div class="box button-hor">翻箱喂料</div>
        <div class="popup">
          <svg version="1.1" width="100%" height="100%">
            <circle
              cx="5"
              cy="75"
              r="2"
              fill="#D8AA2D"
              stroke="#D8AA2D"
              stroke-width="2"
            ></circle>
            <line x1="5" y1="75" x2="50" y2="30" stroke="#D8AA2D" />
            <line x1="50" y1="30" x2="80" y2="30" stroke="#D8AA2D" />
          </svg>
          <div class="popup-label">
            <div>委托方:福建中烟工业有限责任公司</div>
            <div>牌号:福建三明尤溪ELC1CB1A-2023片烟</div>
            <div>班组:丙班</div>
            <div>班次:白班</div>
            <div>开始时间:2023-10-25 09:33:30</div>
            <div>结束时间:2023-10-25 10:33:30</div>
            <div>得分:98.12</div>
          </div>
        </div>
      </div>
      <div class="box-with-popup" style="top: 4%; left: 83%">
        <div class="box button-ver" style="height: 80px">一润</div>
        <div class="popup">
          <svg version="1.1" width="100%" height="100%">
            <circle
              cx="5"
              cy="75"
              r="2"
              fill="#D8AA2D"
              stroke="#D8AA2D"
              stroke-width="2"
            ></circle>
            <line x1="5" y1="75" x2="50" y2="30" stroke="#D8AA2D" />
            <line x1="50" y1="30" x2="80" y2="30" stroke="#D8AA2D" />
          </svg>
          <div class="popup-label">
            <div>委托方:福建中烟工业有限责任公司</div>
            <div>牌号:福建三明尤溪ELC1CB1A-2023片烟</div>
            <div>班组:丙班</div>
            <div>班次:白班</div>
            <div>开始时间:2023-10-25 09:33:30</div>
            <div>结束时间:2023-10-25 10:33:30</div>
            <div>得分:98.12</div>
          </div>
        </div>
      </div>
      <div class="box-with-popup" style="top: 33%; left: 83%">
        <div class="box button-ver">碎片复烤</div>
        <div class="popup">
          <svg version="1.1" width="100%" height="100%">
            <circle
              cx="5"
              cy="75"
              r="2"
              fill="#D8AA2D"
              stroke="#D8AA2D"
              stroke-width="2"
            ></circle>
            <line x1="5" y1="75" x2="50" y2="30" stroke="#D8AA2D" />
            <line x1="50" y1="30" x2="80" y2="30" stroke="#D8AA2D" />
          </svg>
          <div class="popup-label">
            <div>委托方:福建中烟工业有限责任公司</div>
            <div>牌号:福建三明尤溪ELC1CB1A-2023片烟</div>
            <div>班组:丙班</div>
            <div>班次:白班</div>
            <div>开始时间:2023-10-25 09:33:30</div>
            <div>结束时间:2023-10-25 10:33:30</div>
            <div>得分:98.12</div>
          </div>
        </div>
      </div>
      <div class="box-with-popup" style="top: 68%; left: 83%">
        <div class="box button-ver">碎片打包</div>
        <div class="popup">
          <svg version="1.1" width="100%" height="100%">
            <circle
              cx="5"
              cy="75"
              r="2"
              fill="#D8AA2D"
              stroke="#D8AA2D"
              stroke-width="2"
            ></circle>
            <line x1="5" y1="75" x2="50" y2="30" stroke="#D8AA2D" />
            <line x1="50" y1="30" x2="80" y2="30" stroke="#D8AA2D" />
          </svg>
          <div class="popup-label">
            <div>委托方:福建中烟工业有限责任公司</div>
            <div>牌号:福建三明尤溪ELC1CB1A-2023片烟</div>
            <div>班组:丙班</div>
            <div>班次:白班</div>
            <div>开始时间:2023-10-25 09:33:30</div>
            <div>结束时间:2023-10-25 10:33:30</div>
            <div>得分:98.12</div>
          </div>
        </div>
      </div>
      <div class="box-with-popup" style="top: 37%; left: 15%">
        <div class="box button-ver">叶加酶</div>
        <div class="popup">
          <svg version="1.1" width="100%" height="100%">
            <circle
              cx="5"
              cy="75"
              r="2"
              fill="#D8AA2D"
              stroke="#D8AA2D"
              stroke-width="2"
            ></circle>
            <line x1="5" y1="75" x2="50" y2="30" stroke="#D8AA2D" />
            <line x1="50" y1="30" x2="80" y2="30" stroke="#D8AA2D" />
          </svg>
          <div class="popup-label">
            <div>委托方:福建中烟工业有限责任公司</div>
            <div>牌号:福建三明尤溪ELC1CB1A-2023片烟</div>
            <div>班组:丙班</div>
            <div>班次:白班</div>
            <div>开始时间:2023-10-25 09:33:30</div>
            <div>结束时间:2023-10-25 10:33:30</div>
            <div>得分:98.12</div>
          </div>
        </div>
      </div>
      <div class="box-with-popup" style="top: 72%; left: 15%">
        <div class="box button-ver">烟梗打包</div>
        <div class="popup">
          <svg version="1.1" width="100%" height="100%">
            <circle
              cx="5"
              cy="75"
              r="2"
              fill="#D8AA2D"
              stroke="#D8AA2D"
              stroke-width="2"
            ></circle>
            <line x1="5" y1="75" x2="50" y2="30" stroke="#D8AA2D" />
            <line x1="50" y1="30" x2="80" y2="30" stroke="#D8AA2D" />
          </svg>
          <div class="popup-label">
            <div>委托方:福建中烟工业有限责任公司</div>
            <div>牌号:福建三明尤溪ELC1CB1A-2023片烟</div>
            <div>班组:丙班</div>
            <div>班次:白班</div>
            <div>开始时间:2023-10-25 09:33:30</div>
            <div>结束时间:2023-10-25 10:33:30</div>
            <div>得分:98.12</div>
          </div>
        </div>
      </div>
      <div class="box-with-popup" style="top: 72%; left: 42%">
        <div class="box button-ver">烟梗复烤</div>
        <div class="popup">
          <svg version="1.1" width="100%" height="100%">
            <circle
              cx="5"
              cy="75"
              r="2"
              fill="#D8AA2D"
              stroke="#D8AA2D"
              stroke-width="2"
            ></circle>
            <line x1="5" y1="75" x2="50" y2="30" stroke="#D8AA2D" />
            <line x1="50" y1="30" x2="80" y2="30" stroke="#D8AA2D" />
          </svg>
          <div class="popup-label">
            <div>委托方:福建中烟工业有限责任公司</div>
            <div>牌号:福建三明尤溪ELC1CB1A-2023片烟</div>
            <div>班组:丙班</div>
            <div>班次:白班</div>
            <div>开始时间:2023-10-25 09:33:30</div>
            <div>结束时间:2023-10-25 10:33:30</div>
            <div>得分:98.12</div>
          </div>
        </div>
      </div>
      <div class="box-with-popup" style="top: 49%; left: 62%">
        <div class="box button-ver">叶复烤</div>
        <div class="popup">
          <svg version="1.1" width="100%" height="100%">
            <circle
              cx="5"
              cy="75"
              r="2"
              fill="#D8AA2D"
              stroke="#D8AA2D"
              stroke-width="2"
            ></circle>
            <line x1="5" y1="75" x2="50" y2="30" stroke="#D8AA2D" />
            <line x1="50" y1="30" x2="80" y2="30" stroke="#D8AA2D" />
          </svg>
          <div class="popup-label">
            <div>委托方:福建中烟工业有限责任公司</div>
            <div>牌号:福建三明尤溪ELC1CB1A-2023片烟</div>
            <div>班组:丙班</div>
            <div>班次:白班</div>
            <div>开始时间:2023-10-25 09:33:30</div>
            <div>结束时间:2023-10-25 10:33:30</div>
            <div>得分:98.12</div>
          </div>
        </div>
      </div>
      <div class="box-with-popup" style="top: 37%; left: 42%">
        <div class="box button-leaf" :style="shadowStyle('打叶')">打叶</div>
        <div class="popup" :data="getDataStatus('打叶')">
          <svg version="1.1" width="100%" height="100%">
            <circle
              cx="5"
              cy="75"
              r="2"
              fill="#D8AA2D"
              stroke="#D8AA2D"
              stroke-width="2"
            ></circle>
            <line x1="5" y1="75" x2="50" y2="30" stroke="#D8AA2D" />
            <line x1="50" y1="30" x2="80" y2="30" stroke="#D8AA2D" />
          </svg>
          <div class="popup-label">
            <div>{{ data.principal }}</div>
            <div>牌号:福建三明尤溪ELC1CB1A-2023片烟</div>
            <div>班组:丙班</div>
            <div>班次:白班</div>
            <div>开始时间:2023-10-25 09:33:30</div>
            <div>结束时间:2023-10-25 10:33:30</div>
            <div>得分:98.12</div>
          </div>
        </div>
      </div>
      <div class="box-with-popup" style="top: 19%; left: 44%">
        <div class="box button-hor">二润</div>
        <div class="popup">
          <svg version="1.1" width="100%" height="100%">
            <circle
              cx="5"
              cy="75"
              r="2"
              fill="#D8AA2D"
              stroke="#D8AA2D"
              stroke-width="2"
            ></circle>
            <line x1="5" y1="75" x2="50" y2="30" stroke="#D8AA2D" />
            <line x1="50" y1="30" x2="80" y2="30" stroke="#D8AA2D" />
          </svg>
          <div class="popup-label">
            <div>委托方:福建中烟工业有限责任公司</div>
            <div>牌号:福建三明尤溪ELC1CB1A-2023片烟</div>
            <div>班组:丙班</div>
            <div>班次:白班</div>
            <div>开始时间:2023-10-25 09:33:30</div>
            <div>结束时间:2023-10-25 10:33:30</div>
            <div>得分:98.12</div>
          </div>
        </div>
      </div>
      <div class="box-with-popup" style="top: 85%; left: 55%">
        <div class="box button-hor">叶打包</div>
        <div class="popup">
          <svg version="1.1" width="100%" height="100%">
            <circle
              cx="5"
              cy="75"
              r="2"
              fill="#D8AA2D"
              stroke="#D8AA2D"
              stroke-width="2"
            ></circle>
            <line x1="5" y1="75" x2="50" y2="30" stroke="#D8AA2D" />
            <line x1="50" y1="30" x2="80" y2="30" stroke="#D8AA2D" />
          </svg>
          <div class="popup-label">
            <div>委托方:福建中烟工业有限责任公司</div>
            <div>牌号:福建三明尤溪ELC1CB1A-2023片烟</div>
            <div>班组:丙班</div>
            <div>班次:白班</div>
            <div>开始时间:2023-10-25 09:33:30</div>
            <div>结束时间:2023-10-25 10:33:30</div>
            <div>得分:98.12</div>
          </div>
        </div>
      </div>
      <!-- 箭头样式 -->
      <div class="arrow-base arrow-2" style="top: 5%; left: 35%" />
      <div class="arrow-base arrow-2" style="top: 5%; left: 72%" />
      <div class="arrow-base arrow-3" style="top: 20%; left: 72%" />
      <div class="arrow-base arrow-down" style="top: 30%; left: 46%" />
      <div class="arrow-base arrow-down" style="top: 77%; left: 65%" />
      <div class="arrow-base arrow-2" style="top: 50%; left: 74%" />
      <div class="arrow-yellow arrow-down" style="top: 60.5%; left: 85%" />
      <div class="arrow-base arrow-3" style="top: 42%; left: 28%; width: 10%" />
      <div class="arrow-gold arrow-3" style="top: 85%; left: 28%; width: 10%" />
      <div class="arrow-base arrow-1" style="top: 58%; left: 28%; width: 30%" />
      <div
        class="arrow-yellow arrow-1"
        style="top: 38%; left: 59%; width: 19%"
      />
      <div
        class="arrow-gold arrow-down-2"
        style="top: 56%; left: 45%; height: 14%"
      />
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted, reactive } from "vue";
let props = defineProps({
  data: {
    type: Array, //接受的数据类型
    default: () => [
      {
        key: "打叶",
        status: "完成",
        principal: "福建中烟工业有限责任公司",
        trademark: "福建三明尤溪ELC1CB1A-2023片烟",
        team: "丙班",
        shift: "白班",
        start: "2023-10-25 09:33:30",
        end: "2023-10-25 10:33:30",
        score: "98.12",
      },
    ], //接受默认数据
  },
  data2: {
    type: Object, //接受的数据类型
    default: () => {}, //接受默认数据
  },
});

let processedData = ref([]);

onMounted(() => {
  // 更具数据生成对样样式
  processedData.value = props.data.map((data) => {
    const style = shadowStyle(data.status);
    return { ...data, style };
  });
  console.log(processedData.value);
});
const getDataStatus = (key) => {
  processedData.value.forEach((itemData) => {
    if (itemData.key === key) {
      return itemData;
    }
  });
};

const shadowStyle = (key) => {
  let item = processedData.value.find((e) => e.key == key);
  if (!item) {
    return {
      backgroundColor: "rgb(61, 140, 14)",
      boxShadow: `2px 2px 2px 1px rgb(61, 140, 14)`,
    };
  }
  const status = item.status;
  let color = "red";
  if (status === "停机") {
    color = "rgb(145, 9, 21)";
  } else if (status === "未生产") {
    color = "rgb(50, 86, 77)";
  } else if (status === "生产") {
    color = "rgb(61, 140, 14)";
  } else if (status === "完成") {
    color = "rgb(135, 78, 15)";
  } else if (status === "料头") {
    color = "rgb(21, 114, 136)";
  } else if (status === "料尾") {
    color = "rgb(23, 174, 169)";
  }
  return { backgroundColor: color, boxShadow: `2px 2px 2px 1px ${color}` };
};
</script>

<style lang="scss" scoped>
.body-bottom {
  height: 100%;
  width: 100%;
  .box-block {
    height: 100%;
    width: 100%;
    position: relative;
    font-size: 12px;

    .arrow-base {
      height: 20px;
      background-color: aquamarine;
      position: absolute;
    }

    .arrow-yellow {
      height: 20px;
      background-color: #f3de1b;
      position: absolute;
    }

    .arrow-gold {
      height: 20px;
      background-color: #f4a214;
      position: absolute;
    }

    .arrow-1 {
      width: 8%;
      clip-path: polygon(
        0 35%,
        80% 35%,
        80% 0,
        100% 50%,
        80% 100%,
        80% 65%,
        0 65%
      );
    }

    .arrow-2 {
      width: 7%;
      clip-path: polygon(
        0 35%,
        70% 35%,
        70% 0,
        100% 50%,
        70% 100%,
        70% 65%,
        0 65%
      );
    }

    .arrow-3 {
      width: 7%;
      clip-path: polygon(
        0 50%,
        30% 0%,
        30% 35%,
        100% 35%,
        100% 65%,
        30% 65%,
        30% 100%
      );
    }

    .arrow-down {
      width: 5%;
      height: 6%;
      clip-path: polygon(
        35% 0,
        65% 0,
        65% 50%,
        100% 50%,
        50% 100%,
        0 50%,
        35% 50%
      );
    }

    .arrow-down-2 {
      width: 5%;
      clip-path: polygon(
        35% 0,
        65% 0,
        65% 70%,
        100% 70%,
        50% 100%,
        0 70%,
        35% 70%
      );
    }
  }

  .box-with-popup {
    position: absolute;
    color: white;
  }

  .box {
    width: 100%;
    height: 100%;
    white-space: nowrap;
  }

  .button-hor {
    padding: 5px 5px 5px;
    width: 80px;
    font-weight: 500;
    letter-spacing: 2px;
    font-weight: 500;
    text-align: center;
    color: #fff;
    font-weight: 500;
    background-color: rgba(72, 173, 174, 1);
  }

  .button-ver {
    height: 82px;
    writing-mode: vertical-rl;
    letter-spacing: 2px;
    font-size: 14px;
    font-weight: 500;
    padding: 8px 5px;
    font-family: OPPOSans;
    color: #fff;
    font-weight: 500;
    background-color: rgba(52, 119, 141, 1);
  }

  .button-leaf {
    padding: 10px 10px;
    height: 55px;
    writing-mode: vertical-rl;
    text-align: center;
    font-weight: 500;
    letter-spacing: 4px;
    font-weight: 500;
    background-color: rgba(52, 119, 141, 1);
  }

  .popup {
    position: absolute;
    width: 320px;
    opacity: 0;
    top: -60px;
    left: 60%;
    pointer-events: none;
    display: flex;
    // background-color: red;
  }

  .popup-label {
    background: #041430;
    border: 1px solid #d8aa2d;
    opacity: 0.88;
    border-radius: 15px;
    white-space: nowrap;
    color: white;
    font-size: 12px;
    padding: 5px 10px;
  }

  .box-with-popup:hover .popup {
    opacity: 1;
    pointer-events: auto;
    z-index: 999;
  }
}

.title {
  font-size: 22px;
  font-weight: bold;
  color: #fff;
  display: flex;
  height: 45px;
  text-shadow: #fff 1px 0 10px;

  .left {
    background: center center / 100% 100% no-repeat url("/title-left.png");
    width: 10%;
    min-width: 40px;
  }

  .mid {
    background: center center / 100% 100% no-repeat url("/title-mid.png");
    padding: 0 10px;
  }

  .right {
    background: center center / 100% 100% no-repeat url("/title-right.png");
    flex: 1;
    position: relative;
    display: flex;
    flex-direction: row-reverse;
    justify-content: flex-start;
    align-items: flex-end;
    padding-bottom: 2px;

    .button-base {
      background: linear-gradient(to right, #0346d9, #095da5);
      clip-path: polygon(15% 0, 100% 0, 85% 100%, 0 100%);
      padding: 0 20px;
      font-size: 14px;
      color: #fff;
    }

    .button-one {
      margin-right: 10px;
    }

    .button-two {
      margin-left: 20px;
    }
  }
}
</style>
